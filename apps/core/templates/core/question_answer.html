{% load static %}
<html lang="en"><head>
    <title>Admin Upload Questions and Answer | AnswerDone </title>
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'statics/img/apple-touch-icon.png' %}">
<link rel="icon" type="image/png" sizes="32x32" href="{% static 'statics/img/favicon-32x32.png' %}">
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'statics/img/favicon-16x16.png' %}">
<link rel="manifest" href="{% static 'statics/img/site.webmanifest' %}">
<link rel="mask-icon" href="{% static 'statics/img/safari-pinned-tab.svg' %}" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="canonical" href="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ request.path }}" />
<link rel="alternate" href="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ request.path }}" hreflang="x-default"/>

<meta name="description" content="{{description}}">
<meta property="fb:app_id" content="">
<meta property="og:site_name" content="AnswerDone">
<meta property="og:title" content="{{title}}">
<meta property="og:type" content="website">
<meta property="og:description" content="{{description}}">
<meta property="og:image" content="{% static 'statics/img/favicon.png' %}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ request.path }}">
<meta name="twitter:widgets:csp" content="on">
<meta name="twitter:url" content="{{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ request.path }}">
<meta name="twitter:description" content="{{description}}">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{title}}">
<meta name="twitter:site" content="{{ request.scheme }}://{{ request.META.HTTP_HOST }}">
<meta name="twitter:image" content="{% static 'statics/img/favicon.png' %}">
<meta name="apple-mobile-web-app-title" content="AnswerDone">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="csrf-token" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


               <link rel="preload " href="{% static 'statics/js/acd7d7eb48-upload_study_information.js'%}" as="script">
               <script src="{% static 'tinymce/js/tinymce/tinymce.min.js' %}"></script>
<!-- Favicon -->
<script>
    tinymce.init({
        selector: 'textarea#question',
        plugins: 'autoresize code lists image', // Include the image plugin
        toolbar: 'undo redo | formatselect | bold italic underline | bullist numlist | alignleft aligncenter alignright alignjustify | outdent indent | image code', // Add the image button to the toolbar
        autoresize_bottom_margin: 40,
        // Add image upload configuration if needed
        images_upload_url: '/upload/image/', // Replace '/upload/image' with your actual image upload URL
        images_upload_handler: function (blobInfo, success, failure) {
            var xhr, formData;
            xhr = new XMLHttpRequest();
            xhr.withCredentials = false;
            xhr.open('POST', '/upload/image/');
        
            // Get the CSRF token from the cookie
            var csrftoken = getCookie('csrftoken');
        
            xhr.setRequestHeader("X-CSRFToken", csrftoken); // Set the CSRF token in the request headers
        
            xhr.onload = function() {
                var json;
        
                if (xhr.status != 200) {
                    failure('HTTP Error: ' + xhr.status);
                    return;
                }
        
                json = JSON.parse(xhr.responseText);
        
                if (!json || typeof json.location != 'string') {
                    failure('Invalid JSON: ' + xhr.responseText);
                    return;
                }
        
                success(json.location);
            };
        
            formData = new FormData();
            formData.append('file', blobInfo.blob(), blobInfo.filename());
        
            xhr.send(formData);
        }
        
    });
    tinymce.init({
        selector: 'textarea#answer',
        plugins: 'autoresize code lists image', // Include the image plugin
        toolbar: 'undo redo | formatselect | bold italic underline | bullist numlist | alignleft aligncenter alignright alignjustify | outdent indent | image code', // Add the image button to the toolbar
        autoresize_bottom_margin: 40,
        // Add image upload configuration if needed
        images_upload_url: '/upload/image/', // Replace '/upload/image' with your actual image upload URL
        images_upload_handler: function (blobInfo, success, failure) {
            var xhr, formData;
            xhr = new XMLHttpRequest();
            xhr.withCredentials = false;
            xhr.open('POST', '/upload/image/');
        
            // Get the CSRF token from the cookie
            var csrftoken = getCookie('csrftoken');
        
            xhr.setRequestHeader("X-CSRFToken", csrftoken); // Set the CSRF token in the request headers
        
            xhr.onload = function() {
                var json;
        
                if (xhr.status != 200) {
                    failure('HTTP Error: ' + xhr.status);
                    return;
                }
        
                json = JSON.parse(xhr.responseText);
        
                if (!json || typeof json.location != 'string') {
                    failure('Invalid JSON: ' + xhr.responseText);
                    return;
                }
        
                success(json.location);
            };
        
            formData = new FormData();
            formData.append('file', blobInfo.blob(), blobInfo.filename());
        
            xhr.send(formData);
        }
        
    });
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
</script>    
<style>
    .radio-buttons{
        display: flex;
    justify-content: space-between;
    }
    /* Hide the default radio button */
    input[type="radio"] {
        display: none;
    }
    
    /* Style the custom radio button */
    input[type="radio"] + label {
        display: inline-block;
        cursor: pointer;
        padding-left: 25px; /* Adjust as needed */
        position: relative;
    }
    
    /* Style the radio button indicator */
    input[type="radio"] + label:before {
        content: '';
        display: inline-block;
        width: 18px; /* Adjust as needed */
        height: 18px; /* Adjust as needed */
        border: 2px solid #ccc; /* Border color */
        border-radius: 50%; /* Round shape */
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }
    
    /* Style the radio button indicator when checked */
    input[type="radio"]:checked + label:before {
        background-color: #007bff; /* Color when checked */
        border-color: #007bff; /* Border color when checked */
    }
    
</style>
                                {% comment %} <link rel="stylesheet" href="{% static 'statics/css/fcff7c2988-upload_pages_css.css' %}"> {% endcomment %}
                                <link rel="stylesheet" href="{% static 'statics/css/ee3b8afcf4-upload_pages_2_css.css' %}">
                    {% comment %} <link rel="stylesheet" href="{% static 'statics/css/4bbc1d31e4-register_login_css.css' %}"> {% endcomment %}
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
                    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
                    <script>
                        $(document).ready(function() {
                            $('#category').select2({
                                tags: true,
                                tokenSeparators: [',', ' '], // Specify additional separators
                                createTag: function(params) {
                                    var term = $.trim(params.term);
                    
                                    if (term === '') {
                                        return null;
                                    }
                    
                                    return {
                                        id: term,
                                        text: term,
                                        newTag: true // add additional parameters
                                    };
                                }
                            });
                    
                            $('#category').on('change', function(e) {
                                var isNew = $(this).find('[data-select2-tag="true"]').length > 0;
                                if (isNew) {
                                    var newTagText = $(this).val();
                                    console.log('New tag selected:', newTagText);
                                }
                            });
                        });
                    </script>
                    <script>
                        $(document).ready(function() {
                            $('#category').select2({
                                placeholder: ' ',
                                allowClear: true 
                            });
                            
                            $('#question_no').select2({
                                placeholder: ' ',
                                allowClear: true 
                            });
                            
                            $('#product').select2({
                                placeholder: ' ',
                                allowClear: true 
                            });

                            $('#chapter_no').select2({
                                placeholder: ' ',
                                allowClear: true 
                            });
                            $('#question_type').select2({
                                placeholder: ' ',
                                allowClear: true 
                            });
                        });
                    </script>
                    <style>
                        .select2.select2-container--default .select2-selection--single {
                            height:55px;
                        }

                    </style>
<body>  
    {% csrf_token %}

    <script>
        var csrfToken = document.getElementsByName('csrfmiddlewaretoken')[0].value;
        var csrfMetaTag = document.querySelector('meta[name="csrf-token"]');
        var bodyElement = document.querySelector('body');

        if (csrfMetaTag) {
            csrfMetaTag.setAttribute('content', csrfToken);
        } else {
            // If meta tag doesn't exist, create it
            var metaTag = document.createElement('meta');
            metaTag.setAttribute('name', 'csrf-token');
            metaTag.setAttribute('content', csrfToken);
            document.head.appendChild(metaTag);
        }
        bodyElement.setAttribute('data-token', csrfToken);
    </script>   

<div id="app" data-country="214" class="">

                <header class="main-header">

    <div class="header-wrapper simple max-width">
        <div class="wrapper-left">

            <section class="logo-image desktop" id="home-btn-ampl" data-tab-name="">
                <a href="/">
                    <figure>
                                                    <img loading="lazy" alt="logo" src="{% static 'statics/img/logo_blue.png' %}">
                                                                    </figure>
                </a>
            </section>

                            <div class="wrapper-upload-page">
                    <h3>Question Answer Related To Books</h3>
                </div>
            
            <div class="wrapper-center mobile">
                <a href="/admin/core/question_answer/" class="logo-wrapper">
                                            <img loading="lazy" src="{% static '/statics/img/logo-2.png' %}" alt="mobile-logo" class="image-pasif">
                                    </a>

            </div>
        </div>
    </div>
</header>


    
<div id="uploadpage" class="wrapper sell-files-page" data-upload-warning-title="Warning! The file type you are uploading cannot be processed correctly as an example page to potential customers." data-upload-warning-text="Not having preview pages has a large negative effect on your sales. We strongly recommend you upload a  doc or pdf file." data-upload-warning-button="Got it!">
    <nav class="navprogress-bar sellfiles-navprogress" data-nav-sellfiles="unfinish"> <!-- value finish to make indicator full & unfinsih to make indicator 1/2 -->
        <ul class="navprogress-bar-wrapper" data-nav-step="1"> <!-- value data-nav-step to make indicator tab (1 - 3) -->
            <li class="current-item" style="justify-content: center;">Upload Questions</li>
        </ul>
    </nav>
    <article id="content" class="content-wrapper">
        <div id="main-section" class="section-wrapper content-attention">
            <div id="back-button" style="display:block;">
                <a href="/admin/core/question_answer/"><i class="fa fa-long-arrow-left"></i>Go Back</a>
            </div>
            <section class="section-basisgegevens section-content-sellfiles">
                <div class="entry-header-section">

                    <h2 class="title-header-section"></h2>
                </div>
                {% if messages %}
                <ul class="alert-success">
                    {% for message in messages %}
                        <li class="success">{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% if form.errors %}
            
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <div id="connect-error" style="padding-top:25px;display:block">
                                {{ error }}
                            </div>
                        {% endfor %}
                    {% endfor %}
            
            {% endif %}

                <div class="entry-form-section">

                    <form action="{% url 'question_answer_add' %}" method="POST" class="form-basisgegevens" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="input-field search-field" style="width: -webkit-fill-available;">
                            <label for="course" class="title-field">Books Name*
                            </label>
                            <select required class="select2-dropdown-link js-states form-control select2-hidden-accessible" name="product" id="product">
                                <option value="" disabled selected></option>
                                {% for cat in product %}
                                <option value={{ cat.id }}>{{ cat.title }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="input-field search-field">
                            <label for="number_of_questions" class="title-field">Chapter No</label>
                            <select required name="chapter_no" id="chapter_no">
                                <option value="" disabled selected></option>
                                {% for i in numbers %}
                                <option value="{{ i }}">{{ i }}</option>
                                {% endfor %}
                                
                            </select>
                        </div>
                        <div class="input-field search-field">
                            <label for="question_type" class="title-field">Question Type</label>
                            <select required name="question_type" id="question_type">
                                <option value="" disabled selected></option>
                                {% for item in qa_types %}
                                <option value="{{ item.id }}">{{ item.title }}</option>
                                {% endfor %}
                                
                            </select>
                        </div>
                        
                        <div class="input-field search-field">
                            <label for="number_of_questions" class="title-field">Question or Exercises No</label>
                            <select required name="question_no" id="question_no">
                                <option value="" disabled selected></option>
                                {% for i in numbers %}
                                <option value="{{ i }}">{{ i }}</option>
                                {% endfor %}
                                
                            </select>
                        </div>
                        <div class="input-field search-field" id="studyEducation-container">
                            <label for="title" class="title-field"> Title</label>
                            <input type="text" autocomplete="off" name="title" id="title" class="input-search init-field-trigger  make-drop-pane" placeholder="" >
                        </div>
                        <div class="input-field search-field">
                            <label for="question" class="title-field">Question</label>
                            <textarea autocomplete="off" name="question" id="question" class="input-search init-field-trigger make-drop-pane" placeholder=""></textarea>
                        </div>
                        <div class="input-field search-field" id="studyEducation-container">
                            <label for="short_answer" class="title-field"> Short Answer</label>
                            <input type="text" autocomplete="off" name="short_answer" id="short_answer" class="input-search init-field-trigger  make-drop-pane" placeholder="" >
                        </div>
                        <div class="input-field search-field">
                            <label for="answer" class="title-field">Answer Description</label>
                            <textarea autocomplete="off" name="answer" id="answer" class="input-search init-field-trigger make-drop-pane" placeholder=""></textarea>
                        </div>
                    
                        <!-- Include additional hidden fields if needed -->
                        <input type="hidden" name="user" value="{{ user.id }}">
                    
                        <fieldset class="fieldset-form fieldset-choose-price fieldset-current-step" data-step="4">
                            <div class="group-fieldset">
                                <div class="choose-price-field">
                                    <div class="field-price">
                                        <label for="price" class="title-field">Price*</label>
                                        <div class="input-number">
                                            {% comment %} <button type="button" class="decrease-number" data-step-size="0.10" data-min-price="0.00" aria-label="Decrease Number"><i class="fa fa-minus" aria-hidden="true"></i></button> {% endcomment %}
                                            <input name="qa_price" id="your-price" type="number" min="0" step="0.01" data-dot-or-comma="dot" value="{{qnaprice.price}}" readonly>
                                            {% comment %} <button type="button" class="increase-number" data-step-size="0.50" data-min-price="0.00" aria-label="Increase Number"><i class="fa fa-plus" aria-hidden="true"></i></button> {% endcomment %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    
                        <div class="submit-field">
                            <button type="submit" class="cta-submit-form">Upload Question <i class="fa fa-chevron-right"></i></button>
                        </div>
                    </form>                    

                    
                </div>
            </section>
        </div>
    </article>


    <script>
        $(document).ready(function() {
            // Function to update the earnings per sale value
            function updateEarnings() {
                var price = parseFloat($('#your-price').val());
                var charge_earn = parseFloat($('#charge_earn').val());
                // Calculate earnings per sale (example calculation)
                var earnings = price - (price * (charge_earn / 100));
                $('#user-earning').text(earnings.toFixed(2));
            }
    
            // Increase button click event
            $('.increase-number').click(function() {
                var currentValue = parseFloat($('#your-price').val());
                var stepSize = parseFloat($(this).data('step-size'));
                var minValue = parseFloat($(this).data('min-price'));
                var newValue = currentValue + stepSize;
                if (newValue >= minValue) {
                    $('#your-price').val(newValue.toFixed(2));
                    updateEarnings(); // Update earnings after changing the price
                }
            });
    
            // Decrease button click event
            $('.decrease-number').click(function() {
                var currentValue = parseFloat($('#your-price').val());
                var stepSize = parseFloat($(this).data('step-size'));
                var minValue = parseFloat($(this).data('min-price'));
                var newValue = currentValue - stepSize;
                if (newValue >= minValue) {
                    $('#your-price').val(newValue.toFixed(2));
                    updateEarnings(); // Update earnings after changing the price
                }
            });
    
            // Input change event
            $('#your-price').on('input', function() {
                updateEarnings(); // Update earnings when the price input changes
            });
    
            // Initial update of earnings
            updateEarnings();
        });
    </script>
    
</div>

